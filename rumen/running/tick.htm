<html>
<head>
<title>设置定时器</title>
<link rel="stylesheet" href="../../public/css/Word2Chm.css" type="text/css">
<link rel="stylesheet" href="../../public/css/default.css" type="text/css" />
<link rel="stylesheet" href="../../public/css/noframe.css" type="text/css" />
<link rel="stylesheet" href="../../public/css/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="../../public/styles/shThemeDefault.css" type="text/css" />
<script type="text/javascript" src="../../public/scripts/shCore.js"></script>
<script type="text/javascript" src="../../public/scripts/shBrushPhp.js"></script>
<script type="text/javascript">
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
</head>
<body style='text-justify-trim: punctuation'>
    <div class="wiki_content">
        <article>
            <h1>设置定时器</h1>
            <hr>
            <p>swoole提供了类似JavaScript的setInterval/setTimeout异步高精度定时器，粒度为毫秒级。使用也非常简单。</p>
            <h2>程序代码</h2>
            <pre  class="brush: php;"> //每隔2000ms触发一次
swoole_timer_tick(2000, function ($timer_id) {
    echo "tick-2000ms\n";
});

//3000秒后执行此函数
swoole_timer_after(3000, function () {
    echo "after 3000ms.\n"
});
            </pre>
            <ul>
                <li>swoole_timer_tick函数就相当于setInterval，是持续触发的</li>
                <li>swoole_timer_after函数相当于setTimeout，仅在约定的时间触发一次</li>
                <li>swoole_timer_tick/swoole_timer_after函数会返回一个整数，表示定时器的ID</li>
                <li>可以使用 <code>swoole_timer_clear</code>
                    清除此定时器，参数为定时器ID
                </li>
            </ul>
        </article>
        <hr>
    </div>
</body>
</html>
